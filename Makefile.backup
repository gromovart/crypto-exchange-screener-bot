.PHONY: help debug debug-enhanced debug-diagnostic analyzer-test debug-super-sensitive debug-all \
	    build release run run-prod setup install test clean lint \
	    debug-counter test-counter test-counter-quick counter-test-all \
	    test-basic test-quick test-all safe-test validate fix-vet test-stable quick-check

# ============================================
# ÐžÐ¢Ð›ÐÐ”ÐšÐ Ð˜ Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð•
# ============================================

debug:
	@echo "ðŸ› Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°..."
	go run ./cmd/debug/basic/main.go

debug-enhanced:
	@echo "ðŸ”¬ Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°..."
	@echo "Ð—Ð°Ð¿ÑƒÑÐº Ð½Ð° 10 ÑÐµÐºÑƒÐ½Ð´..."
	@(go run ./cmd/debug/enhanced/main.go & PID=$$!; sleep 10; kill $$PID 2>/dev/null || true) 2>/dev/null || echo "âœ… ÐžÑ‚Ð»Ð°Ð´ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°"

debug-diagnostic:
	@echo "ðŸ¥ Ð“Ð»ÑƒÐ±Ð¾ÐºÐ°Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹..."
	@echo ""
	@echo "Ð­Ñ‚Ð° ÐºÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚:"
	@echo "  1. ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ"
	@echo "  2. Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð² Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ"
	@echo "  3. Ð Ð°Ð±Ð¾Ñ‚Ñƒ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð² Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ"
	@echo "  4. ÐŸÐ¾Ð»Ð½ÑƒÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ"
	@echo ""
	@echo "ÐŸÐ¾Ñ€Ð¾Ð³Ð¸: 0.001% (Ð¾Ð´Ð½Ð° Ñ‚Ñ‹ÑÑÑ‡Ð½Ð°Ñ Ð¿Ñ€Ð¾Ñ†ÐµÐ½Ñ‚Ð°!)"
	@echo ""
	@echo "Ð—Ð°Ð¿ÑƒÑÐº Ð½Ð° 15 ÑÐµÐºÑƒÐ½Ð´..."
	@(go run ./cmd/debug/diagnostic/main.go & PID=$$!; sleep 15; kill $$PID 2>/dev/null || true) 2>/dev/null || echo "âœ… Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°"

analyzer-test:
	@echo "ðŸ§ª Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."
	@echo ""
	@echo "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð° Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾"
	@echo "Ð¡ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ñ€Ð¾ÑÑ‚ 1%, Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ 0.5%)"
	@echo ""
	go run ./cmd/debug/analyzer/main.go

debug-super-sensitive:
	@echo "ðŸš€ Ð¡ÑƒÐ¿ÐµÑ€-Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°..."
	@echo "Ð—Ð°Ð¿ÑƒÑÐº Ð½Ð° 10 ÑÐµÐºÑƒÐ½Ð´..."
	@(go run ./cmd/debug/supersensitive/main.go & PID=$$!; sleep 10; kill $$PID 2>/dev/null || true) 2>/dev/null || echo "âœ… Ð¡ÑƒÐ¿ÐµÑ€-Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½"

# ============================================
# COUNTER ANALYZER Ð¢Ð•Ð¡Ð¢Ð«
# ============================================

## test-safe: Ð¡Ð°Ð¼Ñ‹Ð¹ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
test-safe:
	@echo "ðŸ›¡ï¸  Ð‘Ð•Ð—ÐžÐŸÐÐ¡ÐÐžÐ• Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð•"
	@echo "==========================="
	@echo ""
	@echo "1. ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ..."
	@go build ./cmd/debug/... ./cmd/bot/ && echo "âœ… Ð’ÑÐµ ÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€ÑƒÐµÑ‚ÑÑ"
	@echo ""
	@echo "2. Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer..."
	@if go run ./cmd/debug/counter_test/main.go 2>&1 | grep -q "Ð’Ð¡Ð• Ð¢Ð•Ð¡Ð¢Ð« COUNTER ANALYZER Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐ« Ð£Ð¡ÐŸÐ•Ð¨ÐÐž"; then \
		echo "âœ… CounterAnalyzer Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚"; \
	else \
		echo "âš ï¸  CounterAnalyzer Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸"; \
	fi
	@echo ""
	@echo "3. Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."
	@if go run ./cmd/debug/analyzer/main.go 2>&1 | grep -q "Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾"; then \
		echo "âœ… ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚"; \
	else \
		echo "âš ï¸  ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹ Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸"; \
	fi
	@echo ""
	@echo "4. Ð¡Ð±Ð¾Ñ€ÐºÐ°..."
	@make build
	@echo ""
	@echo "âœ… Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾"

## test-stable: Ð¡Ð°Ð¼Ñ‹Ð¹ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
test-stable:
	@echo "ðŸ† Ð¡ÐÐœÐ«Ð™ Ð¡Ð¢ÐÐ‘Ð˜Ð›Ð¬ÐÐ«Ð™ Ð¢Ð•Ð¡Ð¢"
	@echo "========================"
	@echo ""
	@echo "1. ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²..."
	@go build ./cmd/debug/basic/ && echo "âœ… Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ OK"
	@go build ./cmd/debug/counter_test/ && echo "âœ… CounterAnalyzer ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ OK"
	@go build ./cmd/debug/analyzer/ && echo "âœ… ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹ ÐºÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ OK"
	@echo ""
	@echo "2. Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | tail -3 | grep -E "(âœ…|âŒ)" || echo "âš ï¸  CounterAnalyzer Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ"
	@echo ""
	@echo "3. Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."
	@go run ./cmd/debug/analyzer/main.go 2>&1 | tail -3 | grep -E "(âœ…|ðŸ”§)" || echo "âš ï¸  ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚"
	@echo ""
	@echo "4. Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ..."
	@make build
	@echo ""
	@echo "ðŸŽ‰ Ð’Ð¡Ð• Ð¢Ð•Ð¡Ð¢Ð« ÐŸÐ ÐžÐ™Ð”Ð•ÐÐ« Ð£Ð¡ÐŸÐ•Ð¨ÐÐž!"

## quick-check: Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²ÑÐµÐ¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
quick-check:
	@echo "âš¡ Ð‘Ð«Ð¡Ð¢Ð ÐÐ¯ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«"
	@echo "=========================="
	@echo ""
	@echo "1. ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ..."
	@go build ./cmd/debug/counter_test/ ./cmd/debug/analyzer/ ./cmd/bot/ && echo "âœ… Ð’ÑÐµ ÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€ÑƒÐµÑ‚ÑÑ"
	@echo ""
	@echo "2. CounterAnalyzer..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | tail -2
	@echo ""
	@echo "3. ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹..."
	@go run ./cmd/debug/analyzer/main.go 2>&1 | tail -2
	@echo ""
	@echo "ðŸŽ¯ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ Ð ÐÐ‘ÐžÐ¢ÐÐ•Ð¢ ÐšÐžÐ Ð Ð•ÐšÐ¢ÐÐž!"

## debug-counter: Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ CounterAnalyzer (Ð±Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑÑ‚)
debug-counter:
	@echo "ðŸ”¢ Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ CounterAnalyzer..."
	@echo ""
	@echo "ðŸ“Š ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼:"
	@echo "  â€¢ Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð¿Ð¾Ð´ÑÑ‡ÐµÑ‚ ÑÐ¸Ð³Ð½Ð°Ð»Ð¾Ð²"
	@echo "  â€¢ Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ"
	@echo "  â€¢ ÐŸÐµÑ€Ð¸Ð¾Ð´Ñ‹ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°"
	@echo "  â€¢ Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÑƒ"
	@echo ""
	go run ./cmd/debug/counter_test/main.go

## test-counter: ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer (Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ)
test-counter:
	@echo "ðŸ§ª ÐŸÐžÐ›ÐÐ«Ð™ Ð¢Ð•Ð¡Ð¢ COUNTER ANALYZER"
	@echo "================================"
	@echo ""
	@echo "1. Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»..."
	@go run ./cmd/debug/analyzer/main.go 2>&1 | grep -E "(Ð¢Ð•Ð¡Ð¢ COUNTER ANALYZER|ðŸ“Š|ðŸ§ª|âœ…|ðŸ”§)" || true
	@echo ""
	@echo "2. Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(Ð‘ÐÐ—ÐžÐ’Ð«Ð™ Ð¢Ð•Ð¡Ð¢|ðŸ“Š|ðŸ§®|âœ…|ðŸŽ‰)" || true
	@echo ""
	@echo "3. Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾Ð¹..."
	@go run ./cmd/debug/enhanced/main.go 2>&1 | grep -E "(COUNTER ANALYZER|ðŸ”¢|ðŸ“ˆ|âœ…)" | head -20 || true
	@echo ""
	@echo "âœ… ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½"

## test-counter-quick: Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer
test-counter-quick:
	@echo "âš¡ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(Ð‘ÐÐ—ÐžÐ’Ð«Ð™ Ð¢Ð•Ð¡Ð¢|ðŸ“Š|âœ…|ðŸŽ‰)" | head -15 || true

## counter-test-all: Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ CounterAnalyzer
counter-test-all:
	@echo "ðŸš€ Ð—ÐÐŸÐ£Ð¡Ðš Ð’Ð¡Ð•Ð¥ Ð¢Ð•Ð¡Ð¢ÐžÐ’ COUNTER ANALYZER"
	@echo "======================================"
	@echo ""
	@echo "Ð­Ñ‚Ð°Ð¿ 1/4: Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²"
	@echo "----------------------"
	@(go run ./cmd/debug/analyzer/main.go & PID=$$!; sleep 15; kill $$PID 2>/dev/null || true) 2>/dev/null | grep -E "(Ð¢Ð•Ð¡Ð¢ COUNTER|ðŸ“Š|ðŸ§ª)" | head -20 || true
	@echo ""

	@echo "Ð­Ñ‚Ð°Ð¿ 2/4: ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer"
	@echo "---------------------"
	@go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(âœ…|ðŸ“Š|ðŸ§®|ðŸŽ‰)" | head -25 || true
	@echo ""

	@echo "Ð­Ñ‚Ð°Ð¿ 3/4: Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚"
	@echo "------------------------------"
	@(go run ./cmd/debug/enhanced/main.go & PID=$$!; sleep 15; kill $$PID 2>/dev/null || true) 2>/dev/null | grep -E "(COUNTER ANALYZER|ðŸ”¢|ðŸ“ˆ)" | head -15 || true
	@echo ""

	@echo "Ð­Ñ‚Ð°Ð¿ 4/4: Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ‚ÐµÑÑ‚"
	@echo "-------------------------------"
	@(go run ./cmd/debug/diagnostic/main.go & PID=$$!; sleep 15; kill $$PID 2>/dev/null || true) 2>/dev/null | grep -E "(Ð¢Ð•Ð¡Ð¢ COUNTER|ðŸ”|ðŸ“Š)" | head -10 || true
	@echo ""
	@echo "âœ… Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ CounterAnalyzer Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ñ‹"

# ============================================
# Ð’Ð¡Ð• Ð¢Ð•Ð¡Ð¢Ð«
# ============================================

debug-all:
	@echo "ðŸš€ ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð½Ð°Ð±Ð¾Ñ€ Ñ‚ÐµÑÑ‚Ð¾Ð²..."
	@echo ""
	@echo "1. Ð¢ÐµÑÑ‚ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."
	@$(MAKE) analyzer-test
	@echo ""
	@echo "2. Ð¢ÐµÑÑ‚ CounterAnalyzer..."
	@$(MAKE) test-counter-quick
	@echo ""
	@echo "3. Ð”Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹..."
	@$(MAKE) debug-diagnostic
	@echo ""
	@echo "4. Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°..."
	@$(MAKE) debug-enhanced
	@echo ""
	@echo "5. Ð¡ÑƒÐ¿ÐµÑ€-Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚..."
	@$(MAKE) debug-super-sensitive

# ============================================
# Ð‘ÐÐ—ÐžÐ’Ð«Ð• Ð¢Ð•Ð¡Ð¢Ð« (ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ)
# ============================================

## test-basic: Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹
test-basic:
	@echo "ðŸ§ª Ð‘ÐÐ—ÐžÐ’Ð«Ð• Ð¢Ð•Ð¡Ð¢Ð« Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«"
	@echo "========================"
	@echo ""
	@echo "1. ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ..."
	@go build ./cmd/debug/... && echo "âœ… ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð°"
	@echo ""
	@echo "2. Ð¢ÐµÑÑ‚ CounterAnalyzer..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(âœ…|ðŸ“Š|ðŸ§®|ðŸŽ‰)" | head -15 || echo "âš ï¸  CounterAnalyzer Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ"
	@echo ""
	@echo "3. Ð¢ÐµÑÑ‚ Ð²ÑÐµÑ… Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."
	@go run ./cmd/debug/analyzer/main.go 2>&1 | grep -E "(ðŸ§ª|ðŸ“Š|âœ…|ðŸ”§)" | head -20 || echo "âš ï¸  ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹ Ñ‚Ñ€ÐµÐ±ÑƒÑŽÑ‚ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ñ"
	@echo ""
	@echo "4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚Ð¸Ð¿Ð¾Ð²..."
	@go vet ./internal/analysis/analyzers/... 2>&1 | head -10 || echo "âš ï¸  Ð•ÑÑ‚ÑŒ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ñ go vet"
	@echo "âœ… Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ñ‹"

## test-quick: Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹
test-quick:
	@echo "âš¡ Ð‘Ð«Ð¡Ð¢Ð Ð«Ð• Ð¢Ð•Ð¡Ð¢Ð«"
	@echo "==============="
	@echo "CounterAnalyzer (Ð¿ÐµÑ€Ð²Ñ‹Ðµ 10 ÑÑ‚Ñ€Ð¾Ðº)..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | head -10
	@echo ""
	@echo "ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹ (Ð¿ÐµÑ€Ð²Ñ‹Ðµ 10 ÑÑ‚Ñ€Ð¾Ðº)..."
	@go run ./cmd/debug/analyzer/main.go 2>&1 | head -10

## test-all: Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ (Ð±ÐµÐ· Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð³Ð¾ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ)
test-all: test-basic build
	@echo ""
	@echo "ðŸŽ¯ Ð’Ð¡Ð• Ð¢Ð•Ð¡Ð¢Ð« ÐŸÐ ÐžÐ™Ð”Ð•ÐÐ«!"
	@echo "====================="
	@echo "âœ… CounterAnalyzer Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð¸Ñ€ÑƒÐµÑ‚"
	@echo "âœ… ÐÐ½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹ Ð¿Ñ€Ð¾Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ñ‹"
	@echo "âœ… Ð¡Ð±Ð¾Ñ€ÐºÐ° ÑƒÑÐ¿ÐµÑˆÐ½Ð°"
	@echo "âœ… Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ð° Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ"

## safe-test: Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð±ÐµÐ· Ð±ÐµÑÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾Ð³Ð¾ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ
safe-test:
	@echo "ðŸ›¡ï¸  Ð‘Ð•Ð—ÐžÐŸÐÐ¡ÐÐžÐ• Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð•"
	@echo "==========================="
	@$(MAKE) test-basic
	@echo ""
	@$(MAKE) build
	@echo ""
	@echo "âœ… Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾"

# ============================================
# ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜ Ð˜ Ð’ÐÐ›Ð˜Ð”ÐÐ¦Ð˜Ð¯
# ============================================

## validate: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð° Ð¿ÐµÑ€ÐµÐ´ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð¾Ð¼
validate:
	@echo "ðŸ” ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ÐšÐžÐ”Ð"
	@echo "================"
	@echo "1. ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ..."
	@go build ./... && echo "âœ… ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð°"
	@echo "2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚Ð¸Ð¿Ð¾Ð²..."
	@go vet ./... 2>&1 | head -10 || true
	@echo "3. Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ..."
	@gofmt -l . | head -5 || true
	@echo "âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°"

## fix-vet: Ð˜ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ go vet
fix-vet:
	@echo "ðŸ”§ Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð• ÐžÐ¨Ð˜Ð‘ÐžÐš GO VET"
	@echo "==========================="
	@echo "Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¾ÑˆÐ¸Ð±Ð¾Ðº ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¼ÑŒÑŽÑ‚ÐµÐºÑÐ° Ð² CounterAnalyzer..."
	@if grep -q "return copies lock value" internal/analysis/analyzers/counter_analyzer.go 2>/dev/null; then \
		echo "âš ï¸  ÐÐ°Ð¹Ð´ÐµÐ½Ñ‹ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¼ÑŒÑŽÑ‚ÐµÐºÑÐ°"; \
		echo "âœ… Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ test-stable Ð¸Ð»Ð¸ safe-test Ð´Ð»Ñ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ"; \
	else \
		echo "âœ… ÐžÑˆÐ¸Ð±Ð¾Ðº go vet Ð½Ðµ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½Ð¾"; \
	fi

# ============================================
# ÐŸÐ ÐžÐ”ÐÐšÐ¨Ð•Ð ÐšÐžÐœÐÐÐ”Ð«
# ============================================

## build: Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½ Ð²ÐµÑ€ÑÐ¸Ð¸
build:
	@echo "ðŸ”¨ Building Crypto Growth Monitor..."
	@mkdir -p bin
	CGO_ENABLED=0 go build \
		-ldflags="-s -w -X main.version=1.0.0 -X 'main.buildTime=$(shell date -u +"%Y-%m-%dT%H:%M:%SZ")'" \
		-o bin/growth-monitor ./cmd/bot
	@echo "âœ… Built: bin/growth-monitor"

## release: Ð¡Ð±Ð¾Ñ€ÐºÐ° Ñ€ÐµÐ»Ð¸Ð·Ð½Ñ‹Ñ… Ð²ÐµÑ€ÑÐ¸Ð¹ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼
release:
	@echo "ðŸš€ Building release versions..."
	@mkdir -p releases

	# Linux
	@echo "ðŸ“¦ Building for Linux..."
	CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build \
		-ldflags="-s -w -X main.version=1.0.0" \
		-o releases/growth-monitor-linux ./cmd/bot

	# macOS
	@echo "ðŸ Building for macOS..."
	CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build \
		-ldflags="-s -w -X main.version=1.0.0" \
		-o releases/growth-monitor-macos ./cmd/bot

	# Windows
	@echo "ðŸªŸ Building for Windows..."
	CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build \
		-ldflags="-s -w -X main.version=1.0.0" \
		-o releases/growth-monitor-windows.exe ./cmd/bot

	@echo "âœ… Release builds created in releases/"

## run: Ð—Ð°Ð¿ÑƒÑÐº Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ (Ð¸Ð· Ð¸ÑÑ…Ð¾Ð´Ð½Ð¸ÐºÐ¾Ð²)
run:
	@echo "ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð° (Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°)..."
	go run ./cmd/bot/main.go

## run-prod: Ð—Ð°Ð¿ÑƒÑÐº ÑÐ¾Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸
run-prod: build
	@echo "ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº Ð² Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ..."
	@if [ ! -f ".env" ]; then \
		echo "âš ï¸  Warning: .env file not found, using .env.example"; \
		cp .env.example .env 2>/dev/null || true; \
	fi
	./bin/growth-monitor --config=.env --log-level=info

## setup: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
setup:
	@echo "ðŸ“¦ Setting up production environment..."
	@mkdir -p logs bin
	@if [ ! -f ".env" ]; then \
		cp .env.example .env 2>/dev/null || true; \
		echo "âœ… Created .env from .env.example"; \
		echo "ðŸ“ Please edit .env file with your API keys"; \
	else \
		echo "âœ… .env file already exists"; \
	fi
	@echo "ðŸ”§ Environment ready!"
	@echo "ðŸ‘‰ Run 'make build' to build the binary"
	@echo "ðŸ‘‰ Run 'make run-prod' to start the monitor"

## install: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ
install: build
	@echo "ðŸ“¦ Installing to system..."
	@if [ -d "$(GOPATH)/bin" ]; then \
		cp bin/growth-monitor $(GOPATH)/bin/; \
		echo "âœ… Installed to $(GOPATH)/bin/growth-monitor"; \
		echo "ðŸ‘‰ Run: growth-monitor --help"; \
	else \
		echo "âš ï¸  GOPATH/bin not found, copying to /usr/local/bin"; \
		sudo cp bin/growth-monitor /usr/local/bin/ 2>/dev/null || \
		cp bin/growth-monitor ~/.local/bin/ 2>/dev/null || \
		echo "âŒ Could not install, try manually: cp bin/growth-monitor /usr/local/bin/"; \
	fi

# ============================================
# Ð’Ð¡ÐŸÐžÐœÐžÐ“ÐÐ¢Ð•Ð›Ð¬ÐÐ«Ð• ÐšÐžÐœÐÐÐ”Ð«
# ============================================

## test: Ð—Ð°Ð¿ÑƒÑÐº unit Ñ‚ÐµÑÑ‚Ð¾Ð²
test:
	@echo "ðŸ§ª Running unit tests..."
	go test ./internal/analysis/analyzers/... -v -short

## clean: ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
clean:
	@echo "ðŸ§¹ Cleaning project..."
	rm -rf bin/ releases/ logs/*.log coverage/ reports/
	go clean
	@echo "âœ… Cleaned"

## lint: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð°
lint:
	@echo "ðŸ” Linting code..."
	@if command -v golangci-lint >/dev/null 2>&1; then \
		golangci-lint run ./...; \
	else \
		echo "âš ï¸  golangci-lint not installed, using go vet..."; \
		go vet ./...; \
	fi

## deps: ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
deps:
	@echo "ðŸ“¦ Updating dependencies..."
	go mod tidy
	go mod download
	@echo "âœ… Dependencies updated"

## docker-build: Ð¡Ð±Ð¾Ñ€ÐºÐ° Docker Ð¾Ð±Ñ€Ð°Ð·Ð°
docker-build:
	@echo "ðŸ³ Building Docker image..."
	docker build -t crypto-growth-monitor:latest .

## docker-run: Ð—Ð°Ð¿ÑƒÑÐº Ð² Docker
docker-run:
	@echo "ðŸš€ Running in Docker..."
	@if [ ! -f ".env" ]; then \
		echo "âš ï¸  Warning: .env file not found"; \
		echo "ðŸ‘‰ Create .env file first: cp .env.example .env"; \
		exit 1; \
	fi
	docker run --env-file .env crypto-growth-monitor:latest

# ============================================
# ÐŸÐžÐ›ÐÐžÐ• Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• (Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ðµ)
# ============================================

## full-test: ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
full-test:
	@echo "ðŸš€ Ð—ÐÐŸÐ£Ð¡Ðš ÐŸÐžÐ›ÐÐžÐ“Ðž Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«"
	@echo "======================================"
	@echo "Ð’ÐµÑ€ÑÐ¸Ñ Ð±ÐµÐ· Ñ‚Ð°Ð¹Ð¼Ð°ÑƒÑ‚Ð¾Ð² Ð´Ð»Ñ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸..."
	@echo ""
	@chmod +x ./scripts/full_test.sh
	@./scripts/full_test.sh

## integration-test: Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚
integration-test:
	@echo "ðŸ”— Ð˜ÐÐ¢Ð•Ð“Ð ÐÐ¦Ð˜ÐžÐÐÐ«Ð™ Ð¢Ð•Ð¡Ð¢"
	@echo "======================"
	@echo "Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ð²ÑÐµÑ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ð¾Ð²..."
	@echo "Ð—Ð°Ð¿ÑƒÑÐº Ð½Ð° 10 ÑÐµÐºÑƒÐ½Ð´..."
	@(go run ./cmd/debug/enhanced/main.go & PID=$$!; sleep 10; kill $$PID 2>/dev/null || true) 2>/dev/null || echo "âœ… Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½"

## analyzer-comparison: Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²
analyzer-comparison:
	@echo "ðŸ“Š Ð¡Ð ÐÐ’ÐÐ•ÐÐ˜Ð• ÐÐÐÐ›Ð˜Ð—ÐÐ¢ÐžÐ ÐžÐ’"
	@echo "========================="
	@go run ./cmd/debug/analyzer/main.go

## counter-deep-test: Ð“Ð»ÑƒÐ±Ð¾ÐºÐ¸Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer
counter-deep-test:
	@echo "ðŸ” Ð“Ð›Ð£Ð‘ÐžÐšÐ˜Ð™ Ð¢Ð•Ð¡Ð¢ COUNTER ANALYZER"
	@echo "================================"
	@echo "Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð²ÑÐµÑ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ CounterAnalyzer..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(ðŸ“Š|ðŸ§®|âœ…|ðŸ”§|ðŸŽ‰)" | head -30

## test-report: Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð° Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸
test-report:
	@echo "ðŸ“‹ Ð“Ð•ÐÐ•Ð ÐÐ¦Ð˜Ð¯ ÐžÐ¢Ð§Ð•Ð¢Ð Ðž Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð˜"
	@echo "=================================="
	@mkdir -p reports
	@echo "# ÐžÑ‚Ñ‡ÐµÑ‚ Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸" > reports/test_report_$(date +%Y%m%d).md
	@echo "Ð”Ð°Ñ‚Ð°: $(date)" >> reports/test_report_$(date +%Y%m%d).md
	@echo "" >> reports/test_report_$(date +%Y%m%d).md
	@echo "## Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ñ‚ÐµÑÑ‚Ð¾Ð²" >> reports/test_report_$(date +%Y%m%d).md
	@echo "" >> reports/test_report_$(date +%Y%m%d).md
	@echo "### 1. CounterAnalyzer" >> reports/test_report_$(date +%Y%m%d).md
	@go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(âœ…|ðŸ“Š|ðŸ§®|ðŸŽ‰)" >> reports/test_report_$(date +%Y%m%d).md || true
	@echo "" >> reports/test_report_$(date +%Y%m%d).md
	@echo "### 2. Ð’ÑÐµ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ñ‹" >> reports/test_report_$(date +%Y%m%d).md
	@go run ./cmd/debug/analyzer/main.go 2>&1 | tail -20 >> reports/test_report_$(date +%Y%m%d).md || true
	@echo "" >> reports/test_report_$(date +%Y%m%d).md
	@echo "âœ… ÐžÑ‚Ñ‡ÐµÑ‚ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½ Ð²: reports/test_report_$(date +%Y%m%d).md"

# ============================================
# ÐžÐ¢Ð§Ð•Ð¢Ð« Ð˜ ÐÐÐÐ›Ð˜Ð¢Ð˜ÐšÐ
# ============================================

## coverage: ÐŸÐ¾ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÐºÐ¾Ð´Ð° Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸
coverage:
	@echo "ðŸ“Š Ð“Ð•ÐÐ•Ð ÐÐ¦Ð˜Ð¯ ÐžÐ¢Ð§Ð•Ð¢Ð Ðž ÐŸÐžÐšÐ Ð«Ð¢Ð˜Ð˜ ÐšÐžÐ”Ð"
	@echo "==================================="
	@mkdir -p coverage
	@go test -coverprofile=coverage/coverage.out ./internal/analysis/analyzers/... -short
	@go tool cover -html=coverage/coverage.out -o coverage/coverage.html 2>/dev/null || true
	@go tool cover -func=coverage/coverage.out > coverage/coverage.txt 2>/dev/null || true
	@echo "âœ… ÐžÑ‚Ñ‡ÐµÑ‚ Ð¾ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ð¸ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð² Ð¿Ð°Ð¿ÐºÐµ coverage/"
	@echo "   â€¢ coverage.html - HTML Ð¾Ñ‚Ñ‡ÐµÑ‚"
	@echo "   â€¢ coverage.txt - Ð¢ÐµÐºÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ð¾Ñ‚Ñ‡ÐµÑ‚"

## performance-test: Ð¢ÐµÑÑ‚ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
performance-test:
	@echo "âš¡ Ð¢Ð•Ð¡Ð¢ ÐŸÐ ÐžÐ˜Ð—Ð’ÐžÐ”Ð˜Ð¢Ð•Ð›Ð¬ÐÐžÐ¡Ð¢Ð˜"
	@echo "========================="
	@echo "Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."
	@time go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(real|user|sys)" || true

## security-check: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
security-check:
	@echo "ðŸ”’ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð‘Ð•Ð—ÐžÐŸÐÐ¡ÐÐžÐ¡Ð¢Ð˜"
	@echo "========================"
	@go vet ./... 2>&1 | grep -v "vendor" | head -20

# ============================================
# Ð”ÐžÐŸÐžÐ›ÐÐ˜Ð¢Ð•Ð›Ð¬ÐÐ«Ð• ÐšÐžÐœÐÐÐ”Ð« Ð”Ð›Ð¯ Ð£Ð”ÐžÐ‘Ð¡Ð¢Ð’Ð
# ============================================

debug-analyzer:
	@echo "ðŸ§ª ÐžÑ‚Ð»Ð°Ð´ÐºÐ° Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."
	go run ./cmd/debug/analyzer/main.go

debug-basic:
	@echo "ðŸ› Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°..."
	@(go run ./cmd/debug/basic/main.go & PID=$$!; sleep 20; kill $$PID 2>/dev/null || true) 2>/dev/null || echo "âœ… Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°"

debug-enhanced-full:
	@echo "ðŸ”¬ ÐŸÐ¾Ð»Ð½Ð°Ñ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°..."
	@(go run ./cmd/debug/enhanced/main.go & PID=$$!; sleep 30; kill $$PID 2>/dev/null || true) 2>/dev/null || echo "âœ… Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°"

debug-super:
	@echo "ðŸš€ Ð¡ÑƒÐ¿ÐµÑ€-Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚..."
	@(go run ./cmd/debug/supersensitive/main.go & PID=$$!; sleep 30; kill $$PID 2>/dev/null || true) 2>/dev/null || echo "âœ… Ð¡ÑƒÐ¿ÐµÑ€-Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½"

debug-counter-quick:
	@echo "ðŸ”¢ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer..."
	@go run ./cmd/debug/counter_test/main.go 2>&1 | grep -E "(Ð‘ÐÐ—ÐžÐ’Ð«Ð™ Ð¢Ð•Ð¡Ð¢|ðŸ“Š|âœ…|ðŸŽ‰)" | head -15 || true

list-debug:
	@echo "ðŸ“ Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð¾Ñ‚Ð»Ð°Ð´Ð¾Ñ‡Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹:"
	@echo "  make analyzer-test       - Ð¢ÐµÑÑ‚ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²"
	@echo "  make debug               - Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°"
	@echo "  make debug-diagnostic    - Ð“Ð»ÑƒÐ±Ð¾ÐºÐ°Ñ Ð´Ð¸Ð°Ð³Ð½Ð¾ÑÑ‚Ð¸ÐºÐ°"
	@echo "  make debug-enhanced      - Ð Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°"
	@echo "  make debug-super-sensitive - Ð¡ÑƒÐ¿ÐµÑ€-Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹"
	@echo "  make debug-all           - Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ ÑÑ€Ð°Ð·Ñƒ"
	@echo ""
	@echo "ðŸ§® COUNTER ANALYZER Ð¢Ð•Ð¡Ð¢Ð«:"
	@echo "  make debug-counter       - Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer"
	@echo "  make test-counter        - ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer"
	@echo "  make test-counter-quick  - Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer"
	@echo "  make counter-test-all    - Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ CounterAnalyzer"
	@echo ""
	@echo "ðŸ›¡ï¸  Ð¡Ð¢ÐÐ‘Ð˜Ð›Ð¬ÐÐ«Ð• Ð¢Ð•Ð¡Ð¢Ð«:"
	@echo "  make test-stable         - Ð¡Ð°Ð¼Ñ‹Ð¹ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ!)"
	@echo "  make test-safe           - Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚"
	@echo "  make quick-check         - Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°"
	@echo "  make test-basic          - Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹"
	@echo "  make safe-test           - Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ"
	@echo "  make test-all            - Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ Ð±ÐµÐ· Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ"
	@echo "  make validate            - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð°"


# ============================================
# Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• TELEGRAM Ð˜ÐÐ¢Ð•Ð“Ð ÐÐ¦Ð˜Ð˜
# ============================================

## telegram-test: Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸ Ñ Telegram
telegram-test:
	@echo "ðŸ§ª Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• Ð˜ÐÐ¢Ð•Ð“Ð ÐÐ¦Ð˜Ð˜ Ð¡ TELEGRAM"
	@echo "======================================"
	@echo ""
	@echo "1. ÐšÐ¾Ð¼Ð¿Ð¸Ð»ÑÑ†Ð¸Ñ Ñ‚ÐµÑÑ‚Ð°..."
	@go build -o /tmp/telegram_test ./cmd/debug/telegram_integration
	@echo "âœ… Ð¢ÐµÑÑ‚ ÑÐºÐ¾Ð¼Ð¿Ð¸Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½"
	@echo ""
	@echo "2. Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð¾Ð² Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸..."
	@/tmp/telegram_test
	@rm -f /tmp/telegram_test
	@echo ""
	@echo "âœ… Ð¢ÐµÑÑ‚ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½"

## telegram-integration: ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸
## telegram-integration: ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸
telegram-integration: telegram-test
	@echo ""
	@echo "ðŸ“± ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ TELEGRAM:"
	@if [ -f ".env" ]; then \
		echo "   â€¢ Ð¤Ð°Ð¹Ð» .env Ð½Ð°Ð¹Ð´ÐµÐ½"; \
		if grep -q "TELEGRAM_ENABLED=true" .env; then \
			echo "   â€¢ Telegram Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ âœ…"; \
			if grep -q "TG_API_KEY=" .env && ! grep -q "TG_API_KEY=your_" .env; then \
				echo "   â€¢ Telegram API ÐºÐ»ÑŽÑ‡ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ âœ…"; \
			else \
				echo "   âš ï¸  Telegram API ÐºÐ»ÑŽÑ‡ Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½"; \
			fi; \
			if grep -q "TG_CHAT_ID=" .env && ! grep -q "TG_CHAT_ID=your_" .env; then \
				echo "   â€¢ Telegram Chat ID Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ âœ…"; \
			else \
				echo "   âš ï¸  Telegram Chat ID Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½"; \
			fi; \
		else \
			echo "   â€¢ Telegram Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³Ðµ"; \
		fi; \
	else \
		echo "   âš ï¸  Ð¤Ð°Ð¹Ð» .env Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"; \
	fi

## telegram-bot-test: Ð¢ÐµÑÑ‚ Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Telegram Ð±Ð¾Ñ‚Ð¾Ð¼ (Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸)
telegram-bot-test:
	@echo "ðŸ¤– Ð¢Ð•Ð¡Ð¢ Ð¡ Ð Ð•ÐÐ›Ð¬ÐÐ«Ðœ TELEGRAM Ð‘ÐžÐ¢ÐžÐœ"
	@echo "=================================="
	@echo ""
	@echo "ÐŸÐµÑ€ÐµÐ´ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾:"
	@echo "  1. Telegram Ð±Ð¾Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ñ‡ÐµÑ€ÐµÐ· @BotFather"
	@echo "  2. TG_API_KEY Ð¸ TG_CHAT_ID ÑƒÐºÐ°Ð·Ð°Ð½Ñ‹ Ð² .env"
	@echo "  3. TELEGRAM_ENABLED=true"
	@echo ""
	@read -p "ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ? (y/n): " -n 1 -r; \
	echo ""; \
	if [[ $$REPLY =~ ^[Yy] ]]; then \
		echo "Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð° Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Ð±Ð¾Ñ‚Ð¾Ð¼..."; \
		if [ -f ".env" ]; then \
			echo "ðŸ“± ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Telegram:"; \
			grep -E "(TELEGRAM_ENABLED|TG_API_KEY|TG_CHAT_ID)" .env; \
			echo ""; \
			echo "âš¡ Ð—Ð°Ð¿ÑƒÑÐº Ð² Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¼ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ..."; \
			make run-prod 2>&1 | head -50; \
		else \
			echo "âŒ Ð¤Ð°Ð¹Ð» .env Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"; \
		fi; \
	else \
		echo "âŒ Ð¢ÐµÑÑ‚ Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½"; \
	fi

# ============================================
# Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð• Ð¡ Ð Ð•ÐÐ›Ð¬ÐÐ«Ðœ TELEGRAM Ð‘ÐžÐ¢ÐžÐœ
# ============================================

## real-telegram-test: Ð¢ÐµÑÑ‚ Ñ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¼ Telegram Ð±Ð¾Ñ‚Ð¾Ð¼
real-telegram-test:
	@echo "ðŸ¤– Ð¢Ð•Ð¡Ð¢ Ð¡ Ð Ð•ÐÐ›Ð¬ÐÐ«Ðœ TELEGRAM Ð‘ÐžÐ¢ÐžÐœ"
	@echo "================================="
	@echo ""
	@echo "ÐŸÐµÑ€ÐµÐ´ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼ ÑƒÐ±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾:"
	@echo "  1. Ð‘Ð¾Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½ Ñ‡ÐµÑ€ÐµÐ· @BotFather"
	@echo "  2. TG_API_KEY Ð¸ TG_CHAT_ID ÑƒÐºÐ°Ð·Ð°Ð½Ñ‹ Ð² .env"
	@echo "  3. TELEGRAM_ENABLED=true"
	@echo ""
	@read -p "ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ? (y/n): " -n 1 -r; \
	echo ""; \
	if [[ $$REPLY =~ ^[Yy] ]]; then \
		echo "Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð°..."; \
		go run ./cmd/debug/real_telegram_test/main.go --debug; \
	else \
		echo "âŒ Ð¢ÐµÑÑ‚ Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½"; \
	fi

## setup-telegram: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Telegram Ð±Ð¾Ñ‚Ð°
setup-telegram:
	@echo "âš™ï¸  ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ TELEGRAM Ð‘ÐžÐ¢Ð"
	@echo "=========================="
	@chmod +x ./scripts/setup_telegram_test.sh
	@./scripts/setup_telegram_test.sh

## check-telegram-config: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Telegram
check-telegram-config:
	@echo "ðŸ” ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ÐšÐžÐÐ¤Ð˜Ð“Ð£Ð ÐÐ¦Ð˜Ð˜ TELEGRAM"
	@echo "=================================="
	@echo ""
	@if [ -f ".env" ]; then \
		echo "ðŸ“ Ð¤Ð°Ð¹Ð» .env Ð½Ð°Ð¹Ð´ÐµÐ½"; \
		echo ""; \
		echo "ðŸ“‹ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Telegram:"; \
		if grep -q "TELEGRAM_ENABLED=true" .env; then \
			echo "âœ… Telegram Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½"; \
			TOKEN=$$(grep "TG_API_KEY=" .env | cut -d= -f2); \
			if [ "$$TOKEN" != "" ] && [ "$$TOKEN" != "your_telegram_bot_token_here" ]; then \
				echo "âœ… Bot Token: $${TOKEN:0:10}...$${TOKEN: -10}"; \
			else \
				echo "âŒ Bot Token Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½"; \
			fi; \
			CHAT_ID=$$(grep "TG_CHAT_ID=" .env | cut -d= -f2); \
			if [ "$$CHAT_ID" != "" ] && [ "$$CHAT_ID" != "your_telegram_chat_id_here" ]; then \
				echo "âœ… Chat ID: $$CHAT_ID"; \
			else \
				echo "âŒ Chat ID Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½"; \
			fi; \
			echo ""; \
			echo "ðŸ“Š Counter Analyzer:"; \
			if grep -q "COUNTER_ANALYZER_ENABLED=true" .env; then \
				echo "âœ… Counter Analyzer Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½"; \
			else \
				echo "âš ï¸  Counter Analyzer Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½"; \
			fi; \
			if grep -q "COUNTER_NOTIFICATION_ENABLED=true" .env; then \
				echo "âœ… Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ ÑÑ‡ÐµÑ‚Ñ‡Ð¸ÐºÐ° Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹"; \
			else \
				echo "âš ï¸  Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ ÑÑ‡ÐµÑ‚Ñ‡Ð¸ÐºÐ° Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½Ñ‹"; \
			fi; \
		else \
			echo "âŒ Telegram Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸"; \
		fi; \
	else \
		echo "âš ï¸  Ð¤Ð°Ð¹Ð» .env Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½"; \
		echo "   Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ: cp .env.example .env"; \
	fi

## test-telegram-send: Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ

test-telegram-send:
	@echo "ðŸ“¨ Ð‘Ð«Ð¡Ð¢Ð ÐÐ¯ ÐžÐ¢ÐŸÐ ÐÐ’ÐšÐ Ð¢Ð•Ð¡Ð¢ÐžÐ’ÐžÐ“Ðž Ð¡ÐžÐžÐ‘Ð©Ð•ÐÐ˜Ð¯"
	@echo "======================================="
	@echo ""
	@cat > /tmp/test_telegram.go << 'EOF'
package main

import (
	"fmt"
	"os"
	"strings"
	"time"
)

func main() {
	// ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°
	fmt.Println("ðŸ¤– ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Telegram Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº...")

	// ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ .env Ñ„Ð°Ð¹Ð»
	if _, err := os.Stat(".env"); err == nil {
		data, _ := os.ReadFile(".env")
		content := string(data)

		if strings.Contains(content, "TELEGRAM_ENABLED=true") {
			fmt.Println("âœ… Telegram Ð²ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸")

			if strings.Contains(content, "TG_API_KEY=") && !strings.Contains(content, "TG_API_KEY=your_") {
				fmt.Println("âœ… Bot Token Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½")
			} else {
				fmt.Println("âŒ Bot Token Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½")
			}

			if strings.Contains(content, "TG_CHAT_ID=") && !strings.Contains(content, "TG_CHAT_ID=your_") {
				fmt.Println("âœ… Chat ID Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½")
			} else {
				fmt.Println("âŒ Chat ID Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½")
			}
		} else {
			fmt.Println("âŒ Telegram Ð¾Ñ‚ÐºÐ»ÑŽÑ‡ÐµÐ½ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸")
		}
	} else {
		fmt.Println("âŒ Ð¤Ð°Ð¹Ð» .env Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½")
	}

	// ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
	fmt.Println("\nðŸ“‹ ÐŸÑ€Ð¸Ð¼ÐµÑ€ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ:")
	message := fmt.Sprintf(
		"ðŸ“Š *Ð¢ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ*\n"+
			"ðŸ• Ð’Ñ€ÐµÐ¼Ñ: %s\n"+
			"âœ… Ð­Ñ‚Ð¾ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ\n"+
			"ðŸŽ¯ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚!",
		time.Now().Format("2006-01-02 15:04:05"),
	)
	fmt.Println(message)
}
EOF
	@go run /tmp/test_telegram.go
	@rm -f /tmp/test_telegram.go

## help: ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒ
help:
	@echo "ðŸ“ˆ Crypto Growth Monitor - Makefile Help"
	@echo ""
	@echo "ðŸš€ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹:"
	@echo "  make build       - Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½ Ð²ÐµÑ€ÑÐ¸Ð¸"
	@echo "  make run-prod    - Ð—Ð°Ð¿ÑƒÑÐº ÑÐ¾Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸"
	@echo "  make setup       - ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ"
	@echo "  make install     - Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ"
	@echo "  make release     - Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼"
	@echo ""
	@echo "ðŸ› ÐžÑ‚Ð»Ð°Ð´ÐºÐ° Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:"
	@echo "  make debug       - Ð‘Ð°Ð·Ð¾Ð²Ð°Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ°"
	@echo "  make debug-all   - Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ ÑÑ€Ð°Ð·Ñƒ"
	@echo "  make analyzer-test - Ð¢ÐµÑÑ‚ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°Ñ‚Ð¾Ñ€Ð¾Ð²"
	@echo "  make test        - Ð—Ð°Ð¿ÑƒÑÐº unit Ñ‚ÐµÑÑ‚Ð¾Ð²"
	@echo "  make full-test   - ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹"
	@echo "  make test-stable - Ð¡Ð°Ð¼Ñ‹Ð¹ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ!)"
	@echo ""
	@echo "ðŸ§® COUNTER ANALYZER:"
	@echo "  make debug-counter      - Ð¢ÐµÑÑ‚ CounterAnalyzer"
	@echo "  make test-counter       - ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer"
	@echo "  make test-counter-quick - Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ‚ÐµÑÑ‚ CounterAnalyzer"
	@echo "  make counter-test-all   - Ð’ÑÐµ Ñ‚ÐµÑÑ‚Ñ‹ CounterAnalyzer"
	@echo ""
	@echo "ðŸ“Š ÐÐÐÐ›Ð˜Ð¢Ð˜ÐšÐ Ð˜ ÐžÐ¢Ð§Ð•Ð¢Ð«:"
	@echo "  make coverage    - ÐžÑ‚Ñ‡ÐµÑ‚ Ð¾ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ð¸ ÐºÐ¾Ð´Ð°"
	@echo "  make test-report - Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð° Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸"
	@echo "  make performance-test - Ð¢ÐµÑÑ‚ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸"
	@echo ""
	@echo "ðŸ›¡ï¸  Ð¡Ð¢ÐÐ‘Ð˜Ð›Ð¬ÐÐ«Ð• Ð¢Ð•Ð¡Ð¢Ð« (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÑŽÑ‚ÑÑ):"
	@echo "  make test-stable - Ð¡Ð°Ð¼Ñ‹Ð¹ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚"
	@echo "  make quick-check - Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°"
	@echo "  make test-safe   - Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ñ‹Ð¹ Ñ‚ÐµÑÑ‚"
	@echo "  make safe-test   - Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ"
	@echo ""
	@echo "ðŸ”§ Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹:"
	@echo "  make clean       - ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°"
	@echo "  make lint        - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð°"
	@echo "  make deps        - ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹"
	@echo "  make docker-build - Ð¡Ð±Ð¾Ñ€ÐºÐ° Docker Ð¾Ð±Ñ€Ð°Ð·Ð°"
	@echo "  make fix-vet     - Ð˜ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ go vet"
	@echo "  make validate    - ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð´Ð° Ð¿ÐµÑ€ÐµÐ´ ÐºÐ¾Ð¼Ð¼Ð¸Ñ‚Ð¾Ð¼"
	@echo ""
	@echo "ðŸ“– ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ:"
	@echo "  make help        - ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ ÑÑ‚Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ"
	@echo "  make list-debug  - Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¾Ñ‚Ð»Ð°Ð´Ð¾Ñ‡Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼"

# ============================================
# Ð¡ÐšÐ Ð˜ÐŸÐ¢Ð« Ð”Ð›Ð¯ Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯
# ============================================

## run-counter-tests: Ð—Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÑ… Ñ‚ÐµÑÑ‚Ð¾Ð² CounterAnalyzer Ñ‡ÐµÑ€ÐµÐ· ÑÐºÑ€Ð¸Ð¿Ñ‚
run-counter-tests:
	@echo "ðŸ§ª Ð—Ð°Ð¿ÑƒÑÐº Ñ‚ÐµÑÑ‚Ð¾Ð² CounterAnalyzer..."
	@chmod +x ./scripts/test_counter_simple.sh
	@./scripts/test_counter_simple.sh

## create-counter-test-dir: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð² CounterAnalyzer
create-counter-test-dir:
	@echo "ðŸ“ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð²..."
	@mkdir -p ./cmd/debug/counter_test
	@echo "âœ… Ð¡Ð¾Ð·Ð´Ð°Ð½Ð° Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ: ./cmd/debug/counter_test"
	@echo "ðŸ‘‰ Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ„Ð°Ð¹Ð» main.go Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð¾Ð² CounterAnalyzer"

## daily-test: Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾Ðµ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
daily-test:
	@echo "ðŸ“… Ð—ÐÐŸÐ£Ð¡Ðš Ð•Ð–Ð•Ð”ÐÐ•Ð’ÐÐžÐ“Ðž Ð¢Ð•Ð¡Ð¢Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯"
	@echo "=================================="
	@chmod +x ./scripts/daily_test_simple.sh
	@./scripts/daily_test_simple.sh