# –ë—ç–∫–ª–æ–≥

## S/R –ó–æ–Ω—ã ‚Äî —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∑–æ–Ω

### üêõ –§–∏–∫—Å: –¥—Ä–µ–π—Ñ —Ü–µ–Ω—Ç—Ä–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ (chain drift)
**–§–∞–π–ª:** `internal/core/domain/analysis/sr_zones/calculator.go` ‚Üí `clusterLevels()`

**–ü—Ä–æ–±–ª–µ–º–∞:** `refPrice` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ—á–∫–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä. –ö—Ä–∞–π–Ω–∏–µ —Ç–æ—á–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ ~1% –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, —Ö–æ—Ç—è tolerance = 0.5%. –¶–µ–Ω—Ç—Ä –∑–æ–Ω—ã —É–ø–ª—ã–≤–∞–µ—Ç –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ü–µ–Ω–æ–≤–æ–π –ø–∞–º—è—Ç–∏.

**–§–∏–∫—Å:** –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å `refPrice` –∫–∞–∫ —Ü–µ–Ω—É –ø–µ—Ä–≤–æ–π —Ç–æ—á–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –µ–≥–æ. –õ–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–¥–∏–∞–Ω—É –∫–ª–∞—Å—Ç–µ—Ä–∞ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏.

```go
// –°–µ–π—á–∞—Å (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
refPrice = sum / float64(len(cluster))  // –¥—Ä–µ–π—Ñ—É–µ—Ç

// –ù–∞–¥–æ:
refPrice = pivots[i].price  // —Ñ–∏–∫—Å–∏—Ä—É–µ–º –Ω–∞ –ø–µ—Ä–≤–æ–π —Ç–æ—á–∫–µ, –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º
```

---

### üîß –£–ª—É—á—à–µ–Ω–∏–µ: –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Å–∫–æ–Ω—Ç —Å–∏–ª—ã –∑–æ–Ω—ã
**–§–∞–π–ª:** `internal/core/domain/analysis/sr_zones/calculator.go` ‚Üí `buildZone()`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–æ–Ω–∞ —Å 3 –∫–∞—Å–∞–Ω–∏—è–º–∏ 2 –Ω–µ–¥–µ–ª–∏ –Ω–∞–∑–∞–¥ –∏–º–µ–µ—Ç —Å–∏–ª—É 55% ‚Äî —Å—Ç–æ–ª—å–∫–æ –∂–µ, —Å–∫–æ–ª—å–∫–æ 3 –∫–∞—Å–∞–Ω–∏—è 2 —á–∞—Å–∞ –Ω–∞–∑–∞–¥.

**–§–∏–∫—Å:** –î–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –≤–µ—Å –∫ –∫–∞–∂–¥–æ–º—É –∫–∞—Å–∞–Ω–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞—Å–∞–Ω–∏–µ —Å—Ç–∞—Ä—à–µ 2√ó –ø–µ—Ä–∏–æ–¥–∞ = 50% –≤–∫–ª–∞–¥–∞, —Å—Ç–∞—Ä—à–µ 10√ó –ø–µ—Ä–∏–æ–¥–∞ = 10% –≤–∫–ª–∞–¥–∞.

---

### üîß –£–ª—É—á—à–µ–Ω–∏–µ: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ —Å—Ç–µ–Ω—ã –æ—Ä–¥–µ—Ä–æ–≤
**–§–∞–π–ª:** `internal/core/domain/analysis/sr_zones/calculator.go` ‚Üí `minWallUSD`

**–ü—Ä–æ–±–ª–µ–º–∞:** –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ $50K –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–º –ø–æ—Ä–æ–≥–æ–º –¥–ª—è –º–µ–ª–∫–∏—Ö –º–æ–Ω–µ—Ç ($1M –æ–±—ä—ë–º) –∏ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–º –¥–ª—è —Ç–æ–ø–æ–≤—ã—Ö ($1B+ –æ–±—ä—ë–º).

**–§–∏–∫—Å:** –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ `EnrichWithOrderBook` –¥–Ω–µ–≤–Ω–æ–π –æ–±—ä—ë–º –º–æ–Ω–µ—Ç—ã –∏ —Å—á–∏—Ç–∞—Ç—å –ø–æ—Ä–æ–≥ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, 0.02% –æ—Ç 24h volume. –î–ª—è ARCUSDT ($241M) = $48K, –¥–ª—è BTC ($30B) = $6M.

---

### üîß –£–ª—É—á—à–µ–Ω–∏–µ: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è `GetNearestZones` –ø–æ —Ç–∏–ø—É –∑–æ–Ω—ã
**–§–∞–π–ª:** `internal/infrastructure/persistence/redis_storage/sr_storage/storage.go` ‚Üí `GetNearestZones()`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–æ–Ω–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –ø–æ–∑–∏—Ü–∏–∏ —Ü–µ–Ω—ã (`diff < 0` ‚Üí support), –∏–≥–Ω–æ—Ä–∏—Ä—É—è `ZoneType`. –ü–∏–≤–æ—Ç–Ω—ã–π —Ö–∞–π –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–∞–∫ "–ø–æ–¥–¥–µ—Ä–∂–∫–∞" ‚Äî –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–æ (resistance-turned-support), –Ω–æ —Å–∏–ª–∞ –∑–æ–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∞—Å—å –ø–æ –º–∞–∫—Å–∏–º—É–º–∞–º.

**–§–∏–∫—Å:** –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–æ–Ω—ã —Å —Å–æ–≤–ø–∞–¥–∞—é—â–∏–º —Ç–∏–ø–æ–º (`ZoneTypeSupport` –Ω–∏–∂–µ —Ü–µ–Ω—ã, `ZoneTypeResistance` –≤—ã—à–µ). –ó–æ–Ω—ã —Å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–º —Ç–∏–ø–æ–º —Ç–æ–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, –Ω–æ —Å –ø–æ–º–µ—Ç–∫–æ–π "–ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å".
