# ============================================
# CRYPTO EXCHANGE SCREENER BOT
# Configuration File (.env.example)
# ============================================

# Копируйте этот файл как .env и настройте под себя:
# cp .env.example .env
# nano .env

# ============================================
# 1. ОСНОВНЫЕ НАСТРОЙКИ ПРИЛОЖЕНИЯ
# ============================================

# Окружение приложения
# Возможные значения: dev (разработка), prod (продакшен), test (тестирование)
ENVIRONMENT=prod

# Версия приложения (для логирования и мониторинга)
VERSION=1.0.0

# ============================================
# 2. ВЫБОР БИРЖИ И API КЛЮЧИ
# ============================================

# Основная биржа для мониторинга
# Возможные значения: bybit, binance
# Рекомендуется: bybit (лучшая поддержка фьючерсов)
EXCHANGE=bybit

# Тип торговли на бирже
# Возможные значения: futures (фьючерсы), spot (спот)
# Рекомендуется: futures (больше данных, лучше сигналы)
EXCHANGE_TYPE=futures

# Категория фьючерсов (только для Bybit)
# Возможные значения: linear (линейные), inverse (обратные)
# Рекомендуется: linear (USDT-маркированные)
FUTURES_CATEGORY=linear

# Универсальные API ключи (приоритет над биржевыми)
# Назначение: единый формат для всех бирж
API_KEY=
API_SECRET=
BASE_URL=

# =============== BYBIT НАСТРОЙКИ ================
# Получить на: https://www.bybit.com/app/user/api-management
# Права: чтение (Read-only) достаточно для мониторинга
BYBIT_API_KEY=
BYBIT_SECRET_KEY=
BYBIT_API_URL=https://api.bybit.com

# =============== BINANCE НАСТРОЙКИ ===============
# Получить на: https://www.binance.com/en/my/settings/api-management
# Права: чтение (Enable Reading) достаточно
BINANCE_API_KEY=
BINANCE_API_SECRET=

# ============================================
# 3. НАСТРОЙКИ СИМВОЛОВ И ФИЛЬТРАЦИИ
# ============================================

# Фильтр символов для мониторинга
# Формат: список через запятую без пробелов или "all" для всех
# Примеры: BTC,ETH,BNB,SOL,XRP
# Пустое значение = первые 50 символов по объему
SYMBOL_FILTER=

# Символы для исключения из мониторинга
# Формат: список через запятую
# Пример: *DOWN*,*UP*,*BEAR*,*BULL* (исключить левериджи)
EXCLUDE_SYMBOLS=

# Максимальное количество символов для мониторинга
# Значения: 10-500 (больше = выше нагрузка)
# Рекомендуется: 100 для баланса производительности и охвата
MAX_SYMBOLS_TO_MONITOR=100

# Минимальный объем для фильтрации символов (в USDT)
# Значения: >100000 для отсеивания малообъемных символов
# Назначение: исключение мусорных и малоликвидных пар
MIN_VOLUME_FILTER=100000

# Интервал обновления данных в секундах
# Значения: 5-60 (меньше = чаще обновления, выше нагрузка)
# Рекомендуется: 10 для баланса
UPDATE_INTERVAL=10

# ============================================
# 4. ДВИЖОК АНАЛИЗА
# ============================================

# Интервал между анализами в секундах
ANALYSIS_UPDATE_INTERVAL=30

# Временные периоды для анализа в минутах (через запятую)
ANALYSIS_PERIODS=5

# Максимальное количество символов за один цикл анализа
ANALYSIS_MAX_SYMBOLS_PER_RUN=50

# Общий порог для всех сигналов в процентах
ANALYSIS_SIGNAL_THRESHOLD=1.5

# Сколько часов хранить исторические данные
ANALYSIS_RETENTION_PERIOD=24

# Включить кэширование результатов анализа
ANALYSIS_ENABLE_CACHE=true

# Включить параллельную обработку символов
ANALYSIS_ENABLE_PARALLEL=true

# Максимальное количество потоков для параллельной обработки
ANALYSIS_MAX_WORKERS=5

# Минимальное количество точек данных для анализа
ANALYSIS_MIN_DATA_POINTS=2

# ============================================
# 5. КОНФИГУРАЦИЯ АНАЛИЗАТОРОВ
# ============================================

# ------------ АНАЛИЗАТОР РОСТА --------------
# Включить анализатор роста (обнаружение восходящих трендов)
GROWTH_ANALYZER_ENABLED=true

# Минимальная уверенность для сигналов роста (%)
GROWTH_ANALYZER_MIN_CONFIDENCE=60.0

# Минимальный порог роста для сигнала (%)
GROWTH_ANALYZER_MIN_GROWTH=2.0

# Порог непрерывности роста (0-1, выше = строже)
GROWTH_ANALYZER_CONTINUITY_THRESHOLD=0.7

# ------------ АНАЛИЗАТОР ПАДЕНИЯ -------------
# Включить анализатор падения (обнаружение нисходящих трендов)
FALL_ANALYZER_ENABLED=true

# Минимальная уверенность для сигналов падения (%)
FALL_ANALYZER_MIN_CONFIDENCE=60.0

# Минимальный порог падения для сигнала (%)
FALL_ANALYZER_MIN_FALL=2.0

# Порог непрерывности падения (0-1, выше = строже)
FALL_ANALYZER_CONTINUITY_THRESHOLD=0.7

# ----- АНАЛИЗАТОР НЕПРЕРЫВНОСТИ ТРЕНДА ------
# Включить проверку непрерывности тренда
CONTINUOUS_ANALYZER_ENABLED=true

# Минимальное количество непрерывных точек данных
CONTINUOUS_ANALYZER_MIN_POINTS=3

# ------------ АНАЛИЗАТОР ОБЪЕМА --------------
# Включить анализатор объема (обнаружение аномальных объемов)
VOLUME_ANALYZER_ENABLED=true

# Минимальная уверенность для сигналов объема (%)
VOLUME_ANALYZER_MIN_CONFIDENCE=30.0

# Минимальный объем для анализа (USDT)
VOLUME_ANALYZER_MIN_VOLUME=100000.0

# -------- АНАЛИЗАТОР ОТКРЫТОГО ИНТЕРЕСА -------
# Включить анализатор открытого интереса (фьючерсы)
OPEN_INTEREST_ANALYZER_ENABLED=false

# Минимальная уверенность для сигналов OI (%)
OPEN_INTEREST_MIN_CONFIDENCE=50.0

# Минимальное изменение цены для анализа OI (%)
OPEN_INTEREST_MIN_PRICE_CHANGE=1.0

# Минимальное падение цены для анализа OI (%)
OPEN_INTEREST_MIN_PRICE_FALL=1.0

# Минимальное изменение OI для анализа (%)
OPEN_INTEREST_MIN_OI_CHANGE=5.0

# Порог экстремального OI (1.5 = на 50% выше среднего)
OPEN_INTEREST_EXTREME_THRESHOLD=1.5

# Вес анализатора OI в общей системе (0-1)
OPEN_INTEREST_ANALYZER_WEIGHT=0.6

# Включить уведомления для сигналов OI
OPEN_INTEREST_NOTIFY_ENABLED=true

# ============================================
# 6. СЧЕТЧИК СИГНАЛОВ (COUNTER ANALYZER)
# ============================================

# Включить анализатор счетчика (статистика сигналов)
COUNTER_ANALYZER_ENABLED=true

# Базовый период в минуты (рост/падение за этот период = 1 сигнал)
COUNTER_BASE_PERIOD_MINUTES=1

# Период анализа для счетчика
# Значения: 5m, 15m, 30m, 1h, 4h, 1d
COUNTER_ANALYSIS_PERIOD=15m

# Порог роста для счетчика (%)
COUNTER_GROWTH_THRESHOLD=0.1

# Порог падения для счетчика (%)
COUNTER_FALL_THRESHOLD=0.1

# Отслеживать рост в счетчике
COUNTER_TRACK_GROWTH=true

# Отслеживать падение в счетчике
COUNTER_TRACK_FALL=true

# Уведомлять при каждом сигнале счетчика
COUNTER_NOTIFY_ON_SIGNAL=true

# Порог для уведомлений (уведомлять каждые N сигналов)
COUNTER_NOTIFICATION_THRESHOLD=1

# Провайдер графиков для уведомлений
COUNTER_CHART_PROVIDER=coinglass

# Включить уведомления счетчика
COUNTER_NOTIFICATION_ENABLED=true

# Лимиты сигналов для разных периодов:
COUNTER_MAX_SIGNALS_5MIN=5
COUNTER_MAX_SIGNALS_15MIN=8
COUNTER_MAX_SIGNALS_30MIN=10
COUNTER_MAX_SIGNALS_1HOUR=12
COUNTER_MAX_SIGNALS_4HOURS=15
COUNTER_MAX_SIGNALS_1DAY=20

# ============================================
# 7. ФИЛЬТРЫ СИГНАЛОВ
# ============================================

# Включить пост-обработку сигналов
SIGNAL_FILTERS_ENABLED=true

# Глобальная минимальная уверенность для всех сигналов (%)
MIN_CONFIDENCE=50.0

# Максимальное количество сигналов в минуту на символ
MAX_SIGNALS_PER_MIN=5

# Паттерны символов для ВКЛЮЧЕНИЯ (через запятую)
# Формат: * - любой символ (BTC*, *USDT)
SIGNAL_INCLUDE_PATTERNS=

# Паттерны символов для ИСКЛЮЧЕНИЯ (через запятую)
SIGNAL_EXCLUDE_PATTERNS=

# ============================================
# 8. TELEGRAM УВЕДОМЛЕНИЯ
# ============================================

# Включить отправку уведомлений в Telegram
TELEGRAM_ENABLED=false

# Токен бота Telegram (получить у @BotFather)
TG_API_KEY=

# ID чата/пользователя (получить у @userinfobot)
TG_CHAT_ID=

# Уведомлять о сигналах роста
TELEGRAM_NOTIFY_GROWTH=true

# Уведомлять о сигналах падения
TELEGRAM_NOTIFY_FALL=true

# Порог роста для Telegram уведомлений (%)
TELEGRAM_GROWTH_THRESHOLD=0.5

# Порог падения для Telegram уведомлений (%)
TELEGRAM_FALL_THRESHOLD=0.5

# Формат сообщений в Telegram
# Значения: compact (компактный), detailed (подробный)
MESSAGE_FORMAT=compact

# Включать статистику за 24 часа в уведомлениях
INCLUDE_24H_STATS=false

# ============================================
# 9. ДОПОЛНИТЕЛЬНЫЙ МОНИТОРИНГ
# ============================================

# Дополнительные чаты для мониторинга (через запятую)
MONITORING_CHAT_ID=

# Включить дополнительный мониторинг
MONITORING_ENABLED=false

# Уведомлять о росте в мониторинг
MONITORING_NOTIFY_GROWTH=true

# Уведомлять о падении в мониторинг
MONITORING_NOTIFY_FALL=true

# Тестовый режим мониторинга (без реальных уведомлений)
MONITORING_TEST_MODE=false

# ============================================
# 10. НАСТРОЙКИ ОТОБРАЖЕНИЯ В КОНСОЛИ
# ============================================

# Режим отображения в терминале
DISPLAY_MODE=compact

# Максимальное количество сигналов в одном выводе
MAX_SIGNALS_PER_BATCH=10

# Минимальная уверенность для отображения в консоли
MIN_CONFIDENCE_DISPLAY=30

# Отображать сигналы роста в консоли
DISPLAY_GROWTH=true

# Отображать сигналы падения в консоли
DISPLAY_FALL=true

# Какие периоды отображать (минуты, через запятую)
DISPLAY_PERIODS=5,15,30

# Использовать цветовой вывод в терминале
USE_COLORS=true

# ============================================
# 11. ШИНА СОБЫТИЙ (EVENT BUS)
# ============================================

# Размер буфера шины событий
EVENT_BUS_BUFFER_SIZE=1000

# Количество воркеров для обработки событий
EVENT_BUS_WORKER_COUNT=10

# Собирать метрики шины событий
EVENT_BUS_ENABLE_METRICS=true

# Логировать события шины (для отладки)
EVENT_BUS_ENABLE_LOGGING=true

# ============================================
# 12. ПОДПИСКИ И БИЛЛИНГ
# ============================================

# Включить систему подписок
ENABLE_SUBSCRIPTIONS=false

# Секретный ключ Stripe (для обработки платежей)
STRIPE_SECRET_KEY=

# Вебхук секрет Stripe (для уведомлений)
STRIPE_WEBHOOK_SECRET=

# Количество дней пробного периода
DEFAULT_TRIAL_DAYS=7

# Включить авто-продление подписок
ENABLE_AUTO_RENEWAL=true

# ============================================
# 13. ЛОГИРОВАНИЕ И МОНИТОРИНГ
# ============================================

# Уровень детализации логов
LOG_LEVEL=info

# Путь к файлу логов
LOG_FILE=logs/growth_monitor.log

# Выводить логи в консоль
LOG_TO_CONSOLE=true

# Записывать логи в файл
LOG_TO_FILE=true

# Включить режим отладки
DEBUG_MODE=false

# Включить HTTP сервер для мониторинга
HTTP_ENABLED=false

# Порт HTTP сервера
HTTP_PORT=8080

# ============================================
# 14. НАСТРОЙКИ ПРОИЗВОДИТЕЛЬНОСТИ
# ============================================

# Задержка между запросами к API
RATE_LIMIT_DELAY=100ms

# Максимум параллельных HTTP запросов
MAX_CONCURRENT_REQUESTS=10

# ============================================
# 15. БАЗА ДАННЫХ (POSTGRESQL)
# ============================================

# Хост PostgreSQL
DB_HOST=localhost

# Порт PostgreSQL
DB_PORT=5432

# Имя пользователя PostgreSQL
DB_USER=bot

# Пароль PostgreSQL
DB_PASSWORD=bot123

# Имя базы данных
DB_NAME=cryptobot

# Режим SSL (disable для локальной разработки)
DB_SSLMODE=disable

# Максимальное количество открытых соединений
DB_MAX_OPEN_CONNS=25

# Максимальное количество idle соединений
DB_MAX_IDLE_CONNS=10

# Максимальное время жизни соединения
DB_MAX_CONN_LIFETIME=30m

# Максимальное время простоя соединения
DB_MAX_CONN_IDLE_TIME=10m

# Путь к миграциям базы данных
DB_MIGRATIONS_PATH=./internal/infrastructure/persistence/postgres/migrations

# Включить автоматическое применение миграций
DB_ENABLE_AUTO_MIGRATE=true

# ============================================
# 16. REDIS КЭШ
# ============================================

# Хост Redis
REDIS_HOST=localhost

# Порт Redis
REDIS_PORT=6379

# Пароль Redis (оставить пустым если нет пароля)
REDIS_PASSWORD=

# Номер базы данных Redis (0-15)
REDIS_DB=0

# Размер пула соединений Redis
REDIS_POOL_SIZE=10

# Минимальное количество idle соединений
REDIS_MIN_IDLE_CONNS=5

# Максимальное количество повторных попыток при ошибках
REDIS_MAX_RETRIES=3

# Минимальная задержка между повторными попытками
REDIS_MIN_RETRY_BACKOFF=8ms

# Максимальная задержка между повторными попытками
REDIS_MAX_RETRY_BACKOFF=512ms

# Таймаут подключения к Redis
REDIS_DIAL_TIMEOUT=5s

# Таймаут чтения из Redis
REDIS_READ_TIMEOUT=3s

# Таймаут записи в Redis
REDIS_WRITE_TIMEOUT=3s

# Таймаут ожидания свободного соединения из пула
REDIS_POOL_TIMEOUT=4s

# Таймаут простоя соединения перед закрытием
REDIS_IDLE_TIMEOUT=5m

# Максимальный возраст соединения (0 = без ограничений)
REDIS_MAX_CONN_AGE=0

# Время жизни кэша по умолчанию
REDIS_DEFAULT_TTL=1h

# Использовать TLS для подключения к Redis
REDIS_USE_TLS=false

# ============================================
# 17. УСТАРЕВШИЕ НАСТРОЙКИ (ДЛЯ СОВМЕСТИМОСТИ)
# ============================================

CHECK_CONTINUITY=false
MIN_DATA_POINTS=2
GROWTH_THRESHOLD=1.5
FALL_THRESHOLD=1.5
GROWTH_PERIODS=5,15,30

# ============================================
# КОНЕЦ КОНФИГУРАЦИИ
# ============================================

# После настройки запустите:
# make setup    # Настройка окружения
# make build    # Сборка бинарника
# make run-prod # Запуск в продакшен режиме

# Или для разработки:
# make run      # Запуск из исходников